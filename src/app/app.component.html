<main>
  <div class="placeholder">

    <!-- DATA I GODZINA -->
    <div class="top-right-datetime">
      <div class="date-line">{{ currentDateTime | date:'EEEE dd.MM.yyyy':'':'pl-PL' }} r.</div>
    </div>

    <!-- HEADER -->
    <div class="header">
      <h1>DROGA MARYI <br>33 - dniowe rekolekcje</h1>
      <p>nowenna do Å›w. Ludwika i 33 dniowe rozwaÅ¼ania</p>
    </div>

    <div class="divider"></div>

    <!-- EVENTY -->
    <div *ngFor="let item of items; trackBy: trackByTitle" class="event-card">
      <div class="event-header" (click)="toggle(item)">
        <span *ngIf="isTodayInTitleRange(item.title)">ğŸ‘‰</span>
        <span>ğŸ“Œ {{ item.title }}</span>
        <span>{{ item.show ? 'â–²' : 'â–¼' }}</span>
      </div>

      <div class="pill-group" *ngIf="item.show">

        <!-- Miniatura obrazka wydarzenia -->
        <div class="event-image-container" *ngIf="item.image">
          <img [src]="item.image"
               alt="Obraz wydarzenia"
               class="event-thumb"
               (click)="item.fullscreen = !item.fullscreen" />

          <!-- LOKALNY fullscreen w karcie -->
          <div class="fullscreen-local" *ngIf="item.fullscreen" (click)="item.fullscreen = false">
            <img [src]="item.image" class="fullscreen-local-image" />
          </div>
        </div>

        <!-- GRUPY LINKÃ“W I OPISY -->
        <div class="groups-container">
          <ng-container *ngFor="let group of item.links; trackBy: trackByName">

            <!-- Miniaturka grupy -->
            <div class="event-image-container" *ngIf="group.image">
              <img [src]="group.image"
                   alt="Obraz grupy"
                   class="event-thumb"
                   (click)="group.fullscreen = !group.fullscreen" />
              <div class="fullscreen-local" *ngIf="group.fullscreen" (click)="group.fullscreen = false">
                <img [src]="group.image" class="fullscreen-local-image" />
              </div>
            </div>

            <!-- GÅÃ“WNY LINK GRUPY -->
            <div *ngIf="group.type !== 'opis'" class="grid-link main-link"
                 [class.today-highlight]="group.name ? isToday(group.name) : false"
                 (click)="openOnly(group, item)">
              <span *ngIf="group.name && isToday(group.name)">ğŸ‘‰</span>
              <span *ngIf="group.links && group.links.length > 1">â–¶</span>
              {{ group.name }}
            </div>

            <!-- Opis -->
            <div *ngIf="group.type==='opis'" class="grid-link description-link" (click)="toggleLink(group)">
              <span *ngIf="group.protected">ğŸ”’</span>
              <span *ngIf="!group.protected">ğŸ“</span>
              {{ group.name }}
              <div *ngIf="group.show && group.text" class="event-description">
                <pre style="white-space: pre-wrap;">{{ group.text }}</pre>
              </div>
            </div>

            <!-- PODLINKI -->
            <div *ngIf="group.show && group.links && group.links.length > 0" class="link-grid">
              <div *ngFor="let l of group.links" class="grid-link sub-link"
                   [class.today-highlight]="(l.label || l.url) ? isToday(l.label || l.url || '') : false">

                <!-- Miniaturka zdjÄ™cia -->
                <div *ngIf="l.type==='foto'" class="link-thumb-container">
                  <img [src]="l.image" alt="Miniaturka" class="link-thumb" (click)="l.fullscreen = !l.fullscreen" />
                  <div class="fullscreen-local" *ngIf="l.fullscreen" (click)="l.fullscreen = false">
                    <img [src]="l.image" class="fullscreen-local-image" />
                  </div>
                </div>

                <span *ngIf="(l.label || l.url) && isToday(l.label || l.url || '')">ğŸ‘‰</span>
                <span class="sub-icon">â¤</span>

                <span [ngSwitch]="l.type">
                  <span *ngSwitchCase="'film'">ğŸ¬</span>
                  <span *ngSwitchCase="'pdfy'">ğŸ“•</span>
                  <span *ngSwitchCase="'exec'">ğŸ’¿</span>
                  <span *ngSwitchCase="'foto'">ğŸ“·</span>
                  <span *ngSwitchCase="'audio'">ğŸµ</span>
                  <span *ngSwitchCase="'youtube'">ğŸ“º</span>
                  <span *ngSwitchCase="'html'">ğŸŒ</span>
                  <span *ngSwitchDefault>ğŸ“</span>
                </span>

                {{ l.label || l.url }}

              </div>
            </div>

          </ng-container>
        </div>

      </div>
    </div>

    <!-- Dolny pasek -->
    <div style="margin-top: 1rem; position: relative; padding-top: 1rem; border-top: 1px solid #eee;">
      <button class="stylish-button" style="display: block; margin: 0 auto;" (click)="closePage()">Zamknij stronÄ™</button>
      <div class="znak-wodny">
        Â© <span class="ozdobne">EO</span>
      </div>
    </div>

  </div>
</main>
