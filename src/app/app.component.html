<main>
  <div class="placeholder">

    <!-- DATA I GODZINA -->
    <div class="top-right-datetime">
   <div class="date-line">
  {{ currentDateTime | date:'EEEE':'':'pl-PL' }} {{ currentDateTime | date:'yyyy-MM-dd':'':'pl-PL' }}
</div>


    </div>
    <div></div> <div></div>

    <!-- HEADER -->
    <div class="header">
      <h1>DROGA MARYI 33 - dniowe rekolekcje</h1>
      <p>nowenna do Å›w. Ludwika i 33 dniowe rozwaÅ¼ania</p>
    </div>

    <div class="divider"></div>

    <!-- EVENTY -->
    <div *ngFor="let item of items; trackBy: trackByTitle" class="event-card">
      <div class="event-header" (click)="toggle(item)">
        <!-- ğŸ‘‰ jeÅ›li dzisiaj w tytule -->
        <span *ngIf="isTodayInTitleRange(item.title)">ğŸ‘‰</span>
        <span>ğŸ“Œ {{ item.title }}</span>
        <span>{{ item.show ? 'â–²' : 'â–¼' }}</span>
      </div>

      <div class="pill-group" *ngIf="item.show">

        <!-- Obrazek wydarzenia -->
        <div class="event-image-container" *ngIf="item.image" style="position: relative;">
          <img [src]="item.image" alt="Obraz wydarzenia" class="event-image" (click)="toggleImage(item)" />
          <div *ngIf="item.fullscreen" class="fullscreen-overlay" (click)="toggleImage(item)">
            <img [src]="item.image" class="fullscreen-image" />
          </div>
        </div>

        <!-- GRUPY LINKÃ“W I OPISY -->
        <div class="groups-container" *ngIf="item.show">
          <ng-container *ngFor="let group of item.links; trackBy: trackByName">

            <!-- Opis -->
            <div *ngIf="group.type==='opis'" class="grid-link description-link" (click)="toggleLink(group)">
              <span *ngIf="group.protected">ğŸ”’</span>
              <span *ngIf="!group.protected">ğŸ“</span>
              {{ group.name }}
              <div *ngIf="group.show && group.text" class="event-description">
                <pre style="white-space: pre-wrap;">{{ group.text }}</pre>
              </div>
            </div>

            <!-- Linki -->
            <div *ngIf="group.type !== 'opis'">

              <!-- GRUPA PODÅšWIETLANA, JEÅšLI TO DZISIAJ -->
              <div 
                class="grid-link"
                [class.today-highlight]="isToday(group.name)"
                (click)="group.links && group.links.length === 1 ? openLink(group.links[0]) : group.show = !group.show">
                
                <!-- ğŸ‘‰ jeÅ›li dzisiaj -->
                <span *ngIf="isToday(group.name)">ğŸ‘‰</span>
                <span *ngIf="group.links && group.links.length > 1">â–¶</span>
                {{ group.name }}
              </div>

              <!-- POJEDYNCZE LINKI -->
              <div *ngIf="group.show && group.links && group.links.length > 1" class="link-grid">
                <div 
                  *ngFor="let l of group.links" 
                  class="grid-link"
                  [class.today-highlight]="isToday(l.label || l.url)"
                  (click)="openLink(l)">
                  
                  <!-- ğŸ‘‰ jeÅ›li dzisiaj -->
                  <span *ngIf="isToday(l.label || l.url)">ğŸ‘‰</span>

                  <span [ngSwitch]="l.type">
                    <span *ngSwitchCase="'film'">ğŸ¬</span>
                    <span *ngSwitchCase="'pdfy'">ğŸ“•</span>
                    <span *ngSwitchCase="'exec'">ğŸ’¿</span>
                    <span *ngSwitchCase="'foto'">ğŸ“·</span>
                    <span *ngSwitchCase="'audio'">ğŸµ</span>
                    <span *ngSwitchCase="'youtube'">ğŸ“º</span>
                    <span *ngSwitchCase="'html'">ğŸŒ</span>
                    <span *ngSwitchDefault>ğŸ“</span>
                  </span>

                  {{ l.label || l.url }}
                </div>
              </div>

            </div>

          </ng-container>
        </div>

      </div>
    </div>

    <!-- Dolny pasek -->
    <div style="margin-top: 1rem; position: relative; padding-top: 1rem; border-top: 1px solid #eee;">
      <button class="stylish-button" style="display: block; margin: 0 auto;" (click)="closePage()">Zamknij stronÄ™</button>
      <div class="znak-wodny">
        Â© <span class="ozdobne">EO</span>
      </div>
    </div>

  </div>
</main>
